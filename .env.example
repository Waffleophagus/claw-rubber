# -----------------------------
# Required credentials
# -----------------------------
CLAWRUBBER_BRAVE_API_KEY=
# Brave API request rate.
# Use a tier (`free`, `paid`, `base`, `pro`) or a numeric RPS override (`1`, `20`, `50`).
# Examples:
#   CLAWRUBBER_RATE_LIMIT=free
#   CLAWRUBBER_RATE_LIMIT=20
CLAWRUBBER_RATE_LIMIT=free
# Max queued Brave requests before /v1/search returns 503.
CLAWRUBBER_BRAVE_QUEUE_MAX=10
# Retry once when Brave returns 429 (uses retry/reset headers when present).
CLAWRUBBER_BRAVE_RATE_LIMIT_RETRY_ON_429=true
# Number of retry attempts after an initial 429 (0 disables retries).
CLAWRUBBER_BRAVE_RATE_LIMIT_RETRY_MAX=1

# -----------------------------
# Server binding
# -----------------------------
PORT=3000
HOST=0.0.0.0

# -----------------------------
# Core behavior and policy
# -----------------------------
# baseline | strict | paranoid
CLAWRUBBER_PROFILE=strict
# /v1/web-fetch defaults to extractMode=markdown and unlimited output
# (unless client sets maxChars in the request body).
# Hide URLs in /v1/search output
CLAWRUBBER_REDACT_URLS=true
# Return vetted request/final URLs on successful full-content responses
# (/v1/fetch and /v1/web-fetch only).
CLAWRUBBER_EXPOSE_SAFE_CONTENT_URLS=true
# Block medium-risk content by default
CLAWRUBBER_FAIL_CLOSED=true
# Comma-separated domains that bypass scoring
CLAWRUBBER_ALLOWLIST_DOMAINS=
# Comma-separated domains always blocked (wins over allowlist)
CLAWRUBBER_BLOCKLIST_DOMAINS=

# -----------------------------
# Storage and retention
# -----------------------------
CLAWRUBBER_DB_PATH=./data/claw-rubber.db
CLAWRUBBER_LOG_DIR=./data/logs
CLAWRUBBER_RESULT_TTL_MINUTES=30
CLAWRUBBER_RETENTION_DAYS=30

# -----------------------------
# Optional LLM judge
# -----------------------------
CLAWRUBBER_LLM_JUDGE_ENABLED=false
# openai | ollama
CLAWRUBBER_LLM_PROVIDER=openai
CLAWRUBBER_LLM_MODEL=gpt-4o-mini
CLAWRUBBER_OPENAI_API_KEY=
CLAWRUBBER_OLLAMA_BASE_URL=http://localhost:11434/api

# -----------------------------
# Optional website renderer backend
# -----------------------------
# none | browserless
CLAWRUBBER_WEBSITE_RENDERER_BACKEND=none
CLAWRUBBER_BROWSERLESS_URL=http://browserless:3000
CLAWRUBBER_BROWSERLESS_TOKEN=
CLAWRUBBER_BROWSERLESS_TIMEOUT_MS=12000
# domcontentloaded | load | networkidle
CLAWRUBBER_BROWSERLESS_WAIT_UNTIL=networkidle
CLAWRUBBER_BROWSERLESS_WAIT_FOR_SELECTOR=
CLAWRUBBER_BROWSERLESS_MAX_HTML_BYTES=1500000
CLAWRUBBER_BROWSERLESS_FALLBACK_TO_HTTP=true
CLAWRUBBER_BROWSERLESS_BLOCK_ADS=true

# -----------------------------
# Optional docker-compose overrides
# -----------------------------
# GHCR image/tag used by docker-compose for claw-rubber.
CLAWRUBBER_IMAGE=ghcr.io/waffleophagus/claw-rubber:main
CLAWRUBBER_HOST_PORT=3000
BROWSERLESS_HOST_PORT=3001
BROWSERLESS_CONCURRENT=4
BROWSERLESS_QUEUED=8
BROWSERLESS_TIMEOUT_MS=30000
